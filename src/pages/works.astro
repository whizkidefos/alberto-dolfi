---
import Layout from "../layouts/Layout.astro";
import PageHeader from "../components/ui/PageHeader.astro";
import Section from "../components/ui/Section.astro";
import WorksFilter from "../components/works/WorksFilter.astro";
import WorkCard from "../components/works/WorkCard.astro";
import MusicPlayer from "../components/player/MusicPlayer.svelte";

const categories = ["All", "Orchestral", "Chamber", "Piano", "Vocal"];
const activeCategory = Astro.url.searchParams.get("category") || "All";

const works = [
	{
		title: 'Symphony No. 1 "Reflections"',
		year: "2023",
		category: "Orchestral",
		description:
			"A contemporary symphony exploring themes of nature and technology.",
		coverImage:
			"https://images.unsplash.com/photo-1465847899084-d164df4dedc6?auto=format&fit=crop&q=80",
		audioPreview: "/audio/symphony-preview.mp3",
		scoreUrl: "/scores/symphony.pdf",
	},
	{
		title: "String Quartet No. 3",
		year: "2022",
		category: "Chamber",
		description: "An intimate exploration of post-minimalist techniques.",
		coverImage:
			"https://images.unsplash.com/photo-1507838153414-b4b713384a76?auto=format&fit=crop&q=80",
		audioPreview: "/audio/quartet-preview.mp3",
		scoreUrl: "/scores/quartet.pdf",
	},
	{
		title: "Piano Sonata No. 2",
		year: "2022",
		category: "Piano",
		description: "A modern approach to the classical sonata form.",
		coverImage:
			"https://images.unsplash.com/photo-1552422535-c45813c61732?auto=format&fit=crop&q=80",
		audioPreview: "/audio/nocturne-preview.mp3",
		scoreUrl: "/scores/nocturne.pdf",
	},
];

const filteredWorks =
	activeCategory === "All"
		? works
		: works.filter((work) => work.category === activeCategory);
---

<Layout title="Works - Alberto Dolfi">
	<PageHeader
		title="Musical Works"
		subtitle="A collection of compositions across various genres and ensembles"
		backgroundImage="https://images.unsplash.com/photo-1507838153414-b4b713384a76?auto=format&fit=crop&q=80"
	/>

	<Section>
		<WorksFilter categories={categories} activeCategory={activeCategory} />

		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
			{filteredWorks.map((work) => <WorkCard work={work} />)}
		</div>
	</Section>

	<MusicPlayer client:load />
</Layout>
